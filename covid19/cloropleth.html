<html>

    <head>
        <link rel='stylesheet' href='https://unpkg.com/leaflet@1.4.0/dist/leaflet.css'/>
        <script src='https://unpkg.com/leaflet@1.4.0/dist/leaflet.js'></script>
        <script src="conposcovidloc.geojson"></script>
        <script src="cloropleth.geojson"></script><!-- import wrangled geojson -->
    </head>
    
    <body>
        <h1>COVID-19 Recovered (March 23, 2020)</h1>
        <div id='map' style='width:100%; height:500'></div>
    </body>
    
    <script>
        
        // GEOJSON COLOR RAMP
        function getColor(d) {
           return d > 9 ? '#800026' :
           d > 8  ? '#BD0026' :
           d > 7  ? '#E31A1C' :
           d > 5  ? '#FC4E2A' :
           d > 3   ? '#FD8D3C' :
           d > 2   ? '#FEB24C' :
           d > 1   ? '#FED976' :
                      '#FFEDA0';
        }
        
        // GEOJSON STYLE
        function style(feature) {
        return {
                fillColor: getColor(feature.properties.deaths),
                weight: 2,
                opacity: 1,
                color: 'white',
                dashArray: '3',
                fillOpacity: 0.7
            };
        }
        
        // Set up the world map
        map = new L.Map('map');
        var cartocdn = 'https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png';
        cartoAttrib = 'Carto geodatabase is good for this application';
        carto = new L.TileLayer(cartocdn);
        map.setView([65,-100],3); // CENTERED ON CANADA
        map.addLayer(carto);
        
        // THIS IS THE GEOJSON CODE
        L.geoJson(provs, {style: style, onEachFeature: function (feature, layer) {
        layer.bindPopup('<h3>Deaths</h3><h1>'+feature.properties.deaths+'</h1>');
        }}).addTo(map);
        
    </script>

</html>
